{% extends "base.html" %}
{% block body %}
	<h1> Dashboard </h1>
	
	<div class="sub-nav">
        <ul>
            <li><a href="/review/"> General </a></li>
            <li><a href="/review/food"> Food </a></li>
            <li><a href="/review/server"> Server </a></li>
        <ul>
    </div>

	<h2> Service Analysis </h2>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var arr = [];
        arr.push(['Name', 'Average Rating', 'Total Reviews']);
        var food_items = {{servers_data}};
        for(var name in food_items) {
          var values = food_items[name];
          var star_count = values['star_count'];
          arr.push([name, values['average'], values['total']])
        }

        var data = google.visualization.arrayToDataTable(arr);

        var options = {
          hAxis: {
            title: 'Average Rating',
            viewWindow: {
              min: 1,
              max: 5
            },
            ticks: [1, 2, 3, 4, 5]
          },
          vAxis: {title: 'Total Reviews'}
        };

        var chart = new google.visualization.BubbleChart(document.getElementById('chart_div'));

        chart.draw(data, options);

      }
    </script>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
{% endblock %}